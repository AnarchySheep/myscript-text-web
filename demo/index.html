<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="HandheldFriendly" content="true"/>

    <title>myscript-text-web demo</title>

    <link rel="stylesheet" href="demo.css">

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../../myscript-common-element/myscript-languages-element.html">
    <link rel="import" href="../myscript-text-web.html">
</head>
<style>
    myscript-text-web {
        height: calc(100% - 60px);
    }
</style>
<body>
<nav>
    <myscript-languages-element host="newcloud.myscript.com"
                                applicationkey="7d223f9e-a3cb-4213-ba4b-85e930605f8b"
                                hmackey="5ab1935e-529a-4d48-a695-158450e52b13">
    </myscript-languages-element>
    <select id="languageList" onchange="select(this.value)" disabled></select>
</nav>
<myscript-text-web
    apiversion="V4"
    id="text-input"
    host="newcloud.myscript.com"
    applicationkey="7d223f9e-a3cb-4213-ba4b-85e930605f8b"
    hmackey="5ab1935e-529a-4d48-a695-158450e52b13"
    strokecolor="#000000"
    strokewidth="2"
    language="en_US">
</myscript-text-web>
</body>
<script>
    var myscriptTextWebElement = document.querySelector('myscript-text-web');
    var currentLanguage = myscriptTextWebElement.getAttribute('language');

    var languageSelect = document.getElementById('languageList');
    document.querySelector('myscript-languages-element').addEventListener('change', function (evt) {
        evt.detail.forEach(function (language) {
            var selected = currentLanguage === language.value;
            languageSelect.options[languageSelect.options.length] = new Option(language.description, language.value, selected, selected);
        });
        languageSelect.disabled = false;
    });

    function select(lang) {
        myscriptTextWebElement.language = lang;
        myscriptTextWebElement.unloaded = true;
    }
</script>
</html>
